## Makefile to build C demo programs included with the COCO distribution
## under Windows
##
## NOTE: We have tried to make this Makefile as generic and portable
## as possible. However, we regularly test it using GNU make for Windows
## only (actually the one from the gnuwin32 library only).
##
## To make the compilation work under Windows, please rename this file to
## 'Makefile' after renaming the provided file with the same name to
## something else or install Cygwin and run GNU make from within Cygwin
## directly.

LDFLAGS += -lm
CCFLAGS = -g -ggdb -Wall -std=c89 -pedantic 

########################################################################
## Toplevel targets
all: demo.exe coco_test.exe bbob2009_test.exe

clean:
	IF EXIST "bbob2009_test.o" DEL /F bbob2009_test.o 
	IF EXIST "bbob2009_test.exe" DEL /F bbob2009_test.exe
	IF EXIST "coco.o" DEL /F coco.o
	IF EXIST "coco_test.o" DEL /F coco_test.o
	IF EXIST "coco_test.exe" DEL /F coco_test.exe
	IF EXIST "demo.o" DEL /F demo.o
	IF EXIST "demo.exe" DEL /F demo.exe

########################################################################
## Programs
demo.exe: demo.o coco.o
	${CC} ${CCFLAGS} -o demo.exe coco.o demo.o ${LDFLAGS}  

coco_test.exe: coco_test.o coco.o
	${CC}  ${CCFLAGS} -o coco_test.exe coco_test.o coco.o ${LDFLAGS}

bbob2009_test.exe: bbob2009_test.o coco.o
	${CC}  ${CCFLAGS} -o bbob2009_test.exe bbob2009_test.o coco.o ${LDFLAGS} 

coco_timing.exe: coco_timing.o coco.o
	${CC}  ${CCFLAGS} -o coco_timing.exe coco_timing.o coco.o ${LDFLAGS}

########################################################################
## Additional dependencies
coco.o: coco.h
demo.o: coco.h
coco_test.o: coco.h
bbob2009_test.o: coco.h
