## Makefile to build C example programs included with the COCO distribution
## under Windows
##
## NOTE: We have tried to make this Makefile as generic and portable
## as possible. However, we regularly test it using GNU make for Windows
## only (actually the one from the gnuwin32 library only).
##
## To make the compilation work under Windows, please rename this file to
## 'Makefile' after renaming the provided file with the same name to
## something else or install Cygwin and run GNU make from within Cygwin
## directly.

LDFLAGS += -lm
CCFLAGS = -g -ggdb -std=c89 -pedantic -Wall -Wextra -Wstrict-prototypes -Wshadow -Wno-sign-compare -Wconversion

########################################################################
## Toplevel targets
all: example_bbob2009 example_biobj example_toy

clean:
	IF EXIST "coco.o" DEL /F coco.o
	IF EXIST "example_bbob2009.o" DEL /F example_bbob2009.o 
	IF EXIST "example_bbob2009.exe" DEL /F example_bbob2009.exe
	IF EXIST "example_biobj.o" DEL /F example_biobj.o
	IF EXIST "example_biobj.exe" DEL /F example_biobj.exe
	IF EXIST "example_toy.o" DEL /F example_toy.o
	IF EXIST "example_toy.exe" DEL /F example_toy.exe

########################################################################
## Programs
example_bbob2009: example_bbob2009.o coco.o
	${CC} ${CCFLAGS} -o example_bbob2009 coco.o example_bbob2009.o ${LDFLAGS}  

example_biobj: example_biobj.o coco.o
	${CC}  ${CCFLAGS} -o example_biobj example_biobj.o coco.o ${LDFLAGS}

example_toy: example_toy.o coco.o
	${CC}  ${CCFLAGS} -o example_toy example_toy.o coco.o ${LDFLAGS}

########################################################################
## Additional dependencies
coco.o: coco.h coco.c
	${CC} -c ${CCFLAGS} -o coco.o coco.c
example_bbob2009.o: coco.h coco.c example_bbob2009.c
	${CC} -c ${CCFLAGS} -o example_bbob2009.o example_bbob2009.c
example_biobj.o: coco.h coco.c example_biobj.c
	${CC} -c ${CCFLAGS} -o example_biobj.o example_biobj.c
example_toy.o: coco.h coco.c example_toy.c
	${CC} -c ${CCFLAGS} -o example_toy.o example_toy.c
