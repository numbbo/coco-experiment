## Makefile to build C demo programs included with the COCO distribution
## under Windows
##
## NOTE: We have tried to make this Makefile as generic and portable
## as possible. However, we regularly test it using GNU make for Windows
## only (actually the one from the gnuwin32 library only).
##
## To make the compilation work under Windows, please rename this file to
## 'Makefile' after renaming the provided file with the same name to
## something else or install Cygwin and run GNU make from within Cygwin
## directly.


LDFLAGS += -lm
CCFLAGS = -g -ggdb -Wall -std=c89 -pedantic

########################################################################
## Toplevel targets
all: demo_mo.exe

clean:
	IF EXIST "coco.o" DEL /F coco.o
	IF EXIST "demo_mo.o" DEL /F demo_mo.o
	IF EXIST "demo_mo.exe" DEL /F demo_mo.exe

########################################################################
## Programs
demo_mo.exe: demo_mo.o coco.o
	${CC} ${CCFLAGS} -o demo_mo.exe coco.o demo_mo.o ${LDFLAGS}

########################################################################
## Additional dependencies
coco.o: coco.h
	${CC} -c ${CCFLAGS} -o coco.o coco.c ${LDFLAGS}
demo_mo.o: coco.h
	${CC} -c ${CCFLAGS} -o demo_mo.o demo_mo.c ${LDFLAGS}
